{% extends 'base.html' %}
{% load render_table from django_tables2 %}

{% load widget_tweaks %}

{% block content %}
{% load static %}
<script> console.log("inside my script")</script>
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>

<link rel="stylesheet" type="text/css" href="{% static 'styleforcompany.css' %}">

<div class="container emp-profile">
            <form method="post">
                <div class="row">
                    <div class="col-md-5">
                        <h3>Share Prediction Graph</h3>
                    </div>
                    <div class="col-md-7">
                        <div class="profile-head">
                                    <h5>
                                        {{ company_name }}
                                    </h5>
                                    <h6>
                                        {{ sector }}
                                    </h6>
{#                                    <p class="proile-rating">RANKINGS : <span>8/10</span></p>#}
                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">About</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Timeline</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-5">
                        <canvas id="myChart" width="500" height="500"></canvas>
                        <script>
                        var ctx = document.getElementById('myChart').getContext('2d');
                        var myChart = new Chart(ctx, {
                            type: 'line',
                            data: {
                                labels: [{% for d in dates %} "{{ d }}", {% endfor %}],
                                datasets: [{
                                    label: 'price',
                                    data: [{% for p in prices %} "{{ p }}", {% endfor %}],
                                    backgroundColor: [
                                        'rgba(255, 99, 132, 0.2)',
                                        'rgba(54, 162, 235, 0.2)',
                                        'rgba(255, 206, 86, 0.2)',
                                        'rgba(75, 192, 192, 0.2)',
                                        'rgba(153, 102, 255, 0.2)',
                                        'rgba(255, 159, 64, 0.2)'
                                    ],
                                    //backgroundColor: [{% for c in bgcolor %} "{{ c }}", {% endfor %}],
                                    {#borderColor: [#}
                                    {#    'rgba(255, 99, 132, 1)',#}
                                    {#    'rgba(54, 162, 235, 1)',#}
                                    {#    'rgba(255, 206, 86, 1)',#}
                                    {#    'rgba(75, 192, 192, 1)',#}
                                    {#    'rgba(153, 102, 255, 1)',#}
                                    {#    'rgba(255, 159, 64, 1)'#}
                                    {#],#}
                                    borderColor: [{% for c in colors %} "{{ c }}", {% endfor %}],
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: false
                                        }
                                    }]
                                }
                            }
                        });
                        </script>

                    </div>
                    <div class="col-md-7">
                        <div class="tab-content profile-tab" id="myTabContent">
                            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Trade Code</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{ trade_code }}</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Company Name</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{ company_name }}</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Authorized Capital</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{ authorized_capital }}</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Paid Up Capital</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{ paid_up_capital }}</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Outstanding Share Number</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{ outstanding_share_number }}</p>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Sector</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{ sector }}</p>
                                            </div>
                                        </div>
                            </div>

                            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                                <div>
                                {%render_table table %}
                            </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        <label style="padding: 15px"></label>
                        <span class="dot" style="background-color: red;border-radius: 50%;height: 15px;width: 15px;display: inline-block;"></span>
                        <b>History</b>
                        <label style="padding: 15px"></label>
                        <span class="dot" style="background-color: green;border-radius: 50%;height: 15px;width: 15px;display: inline-block;"></span>
                        <b>Prediction</b>
                    </div>
                </div>
            </form>
        </div>
{% endblock %}